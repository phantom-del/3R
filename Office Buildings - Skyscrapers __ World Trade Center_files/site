function initGettingHereMarkers(){typeof vehicleLocations!="undefined"&&(vehicleMarkers=mapsGettingHereCreateMarkers(vehicleLocations),subwayMarkers=mapsGettingHereCreateMarkers(subwayLocations),pathMarkers=mapsGettingHereCreateMarkers(pathLocations),busMarkers=mapsGettingHereCreateMarkers(busLocations),ferryMarkers=mapsGettingHereCreateMarkers(ferryLocations),parkingMarkers=mapsGettingHereCreateMarkers(parkingLocations),showGettingHere(subwayMarkers))}function panWithOffset(n){var t=map.getProjection().fromLatLngToPoint(n),i=new google.maps.Point(50/Math.pow(2,map.getZoom()),110/Math.pow(2,map.getZoom()));map.panTo(map.getProjection().fromPointToLatLng(new google.maps.Point(t.x+i.x,t.y-i.y)))}function updateMapDebug(){if(debug_map){var t=$("div.map-debug"),n="<strong>MAP DEBUG:</strong>";n+='<div class="debug-item"><strong>CENTER:</strong> '+map.getCenter(),n+='<div class="debug-item"><strong>ZOOM:</strong> '+map.getZoom(),t.html(n)}}function searchResultMarkerClick(n){var t,i;n.infobox!=null&&(n.infobox.oldClose(),t=activeMarker,activeMarker=n,t!=null&&(n.infobox!=t.infobox&&t.infobox.close(),t.setMap(map),t.shown=!0),i='<span class="block med-grey">'+n.address+"</span>",typeof n.formatted_phone_number!="undefined"&&(i+='<span class="block med-grey">'+n.formatted_phone_number+"</span>"),typeof n.website!="undefined"&&(i+='<span class="block med-grey"><a target="_blank" href="'+n.website+'">Visit Website</a></span>'),$("#ib-title",search_ib_content).removeClass("restaurant bar cafe").addClass(n.iconclass),$("#ib-title",search_ib_content).html(n.place_name),$("#ib-description",search_ib_content).html(i),typeof n.photo!="undefined"?$("#ib-image",search_ib_content).show().attr("src",n.photo):$("#ib-image",search_ib_content).hide(),n.infobox.open(map,n),$("html").hasClass("ie8")||$("html").hasClass("ie9")?panWithOffset(n.position):map.panTo(n.position),n.setMap(null),n.shown=!1)}function createMarker(n,t){var u=markerIcons[0].normal,e=markerIcons[0].hover,o=markerIcons[0].name,r,f,i;if(typeof markerOverride!="undefined"&&(t=[markerOverride]),typeof t!="undefined")for(r=0;r<markerIcons.length;r++)if(typeof markerIcons[r]!="undefined")for(f=0;f<t.length;f++)if(markerIcons[r].name==t[f]){u=markerIcons[r].normal,e=markerIcons[r].hover,o=markerIcons[r].name;break}return u==null?null:(i=new google.maps.Marker({position:n,map:null,icon:u}),i.image=u,i.imageH=e,i.iconclass=o,google.maps.event.addListener(i,"mouseover",function(){this.setIcon(this.imageH)}),google.maps.event.addListener(i,"mouseout",function(){this.setIcon(this.image)}),i.shown=!0,i.infobox=searchIB,google.maps.event.addListener(i,"click",function(){searchResultMarkerClick(i)}),i)}function _getAddress(n,t,i){for(var u,r=0;r<n.length;r++)for(u=0;u<n[r].types.length;u++)if(n[r].types[u]==t)return i?n[r].long_name:n[r].short_name;return""}function getAddressLong(n,t){return _getAddress(n,t,!0)}function getAddressShort(n,t){return _getAddress(n,t,!1)}function generateResultItem(n,t,i){var e,o,f,s;if(typeof i!="undefined"){e=i.address_components,o='<div class="search-item" data-index="'+t.index+'"><span class="search-title">'+i.name+'</span><span class="med-grey">'+getAddressLong(e,"street_number")+" "+getAddressLong(e,"route")+"</span>",t.address=getAddressLong(e,"street_number")+" "+getAddressLong(e,"route"),t.place_name=i.name,typeof i.formatted_phone_number!="undefined"&&(o+='<span class="med-grey">'+i.formatted_phone_number+"</span>",t.formatted_phone_number=i.formatted_phone_number),typeof i.website!="undefined"&&(o+='<span class="med-grey"><a href="'+i.website+'" aria-label="Visit '+i.name+' Website">Visit Website</a></span>',t.website=i.website),o+="</div>",typeof i.photos!="undefined"&&(t.photo=typeof i.photos[0].getUrl!="undefined"?i.photos[0].getUrl({maxWidth:150,maxHeight:100}):"https://maps.googleapis.com/maps/api/place/photo?maxwidth=150&maxheight=100&photoreference="+i.photos[0].photo_reference+"&key=AIzaSyDk3-hwnjZF4H-ZMnOv5UN2BYXFBIdRxRA"),$(".search-results",resultBox).append(o),$("div.search-item[data-index="+t.index+"]").click(function(){var n=$(this).attr("data-index");searchResultMarkerClick(markersArray[n])});var h=markerIcons[0].normal,c=markerIcons[0].hover,l=markerIcons[0].name;for(typeof markerOverride!="undefined"&&(i.types=[markerOverride]),f=0;f<markerIcons.length;f++)if(typeof markerIcons[f]!="undefined")for(s=0;s<i.types.length;s++)if(markerIcons[f].name==i.types[s]){h=markerIcons[f].normal,c=markerIcons[f].hover,l=markerIcons[f].name;break}t.image=h,t.imageH=c,t.iconclass=l,t.setIcon(h),t.setMap(map)}}function addSearchResults(n,t,i){if(resultBox.length!=0)if(i)$.getJSON("/Maps/GetPlace?placeid="+n.place_id,function(r){generateResultItem(n,t,r.result,r.status,i)});else{var r={reference:n.reference};service.getDetails(r,function(r,u){u===google.maps.places.PlacesServiceStatus.OK?generateResultItem(n,t,r,u,i):u===google.maps.GeocoderStatus.OVER_QUERY_LIMIT&&setTimeout(function(){addSearchResults(n,t,i)},200)})}}function generateInfoBox(){if(searchIB==null){var n=!1;($("html").hasClass("ie8")||$("html").hasClass("ie9"))&&(n=!0),searchIB=new InfoBox({alignBottom:!0,content:document.getElementById("wtc-infobox-search"),disableAutoPan:n,maxWidth:parseInt(search_ib_content.css("max-width"),10),pixelOffset:new google.maps.Size(-52,-47),zIndex:null,boxStyle:{opacity:1,width:search_ib_content.css("max-width")},closeBoxMargin:"12px 4px 2px 2px",closeBoxURL:"/Content/img/infobox_close.png",infoBoxClearance:new google.maps.Size(20,20)}),searchIB.oldDraw=searchIB.draw,searchIB.oldClose=searchIB.close,searchIB.draw=function(){this.oldDraw.apply(this),jQuery(this.div_).hide(),jQuery(this.div_).fadeIn(300)},searchIB.close=function(){var n=this;jQuery(this.div_).fadeOut(300,function(){n.oldClose.apply(n)})},google.maps.event.addListener(searchIB,"closeclick",function(){var n=activeMarker;activeMarker=null,n!=null&&(n.setMap(map),n.shown=!0)})}}function searchResults(n,t,i){var r,u,f;if(generateInfoBox(),t==google.maps.places.PlacesServiceStatus.OK){for(r=0;r<n.length;r++)(u=n[r],f=createMarker(u.geometry.location,u.types),f!=null)&&(markersArray.push(f),u.last=r==n.length-1?!0:!1,f.index=r,addSearchResults(u,f,i));searchRequest[searchRequest.length-1]==null&&searchRequest.pop(),++currentRequest<searchRequest.length&&(searchRequest[currentRequest].location=mapOptions.center,service.nearbySearch(searchRequest[currentRequest],searchResultsUncached))}else t!==google.maps.GeocoderStatus.OVER_QUERY_LIMIT||i||setTimeout(function(){service.nearbySearch(searchRequest[currentRequest],searchResultsUncached)},400);markersArray.length==0&&$(".no-results").show()}function searchResultsUncached(n,t){searchResults(n,t,!1)}function showTransit(n){transitLayer.setMap(n?map:null)}function showFerry(n){var t,i;if(typeof mapOptions=="object"&&typeof mapOptions.styles=="object")for(t=0;t<mapOptions.styles.length;t++)if(mapOptions.styles[t].featureType=="transit.line")for(i=0;i<mapOptions.styles[t].stylers.length;i++)if(typeof mapOptions.styles[t].stylers[i].visibility!="undefined"){mapOptions.styles[t].stylers[i].visibility=n?"on":"off",map.setOptions(mapOptions);return}}function WTCOverlay(n,t,i){this.bounds_=n,this.image_=t,this.map_=i,this.div_=null,this.setMap(i)}function init(){function v(){var t=u.hasClass("no-scrolltop")?0:u.offset().top,n=($(window).height()-t)*.75;n>635&&(n=635),u.height(n)}var o,c,s,f,e,l,a,i,r,t,n,h,u;for(mapOptions={scrollwheel:!1,mapTypeControl:!1,streetViewControl:!1,zoom:12,center:new google.maps.LatLng(40.7114745,-74.0132635),mapTypeId:google.maps.MapTypeId.ROADMAP,styles:[{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#808080"},{visibility:"off"},{weight:.7}]},{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{color:"#f5f5f2"},{visibility:"on"}]},{featureType:"administrative",stylers:[{visibility:"off"}]},{featureType:"poi.attraction",stylers:[{visibility:"off"}]},{featureType:"landscape.man_made",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{visibility:"on"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"poi.medical",stylers:[{visibility:"off"}]},{featureType:"poi.place_of_worship",stylers:[{visibility:"off"}]},{featureType:"poi.school",stylers:[{visibility:"off"}]},{featureType:"poi.sports_complex",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#ffffff"},{visibility:"simplified"}]},{featureType:"road.arterial",stylers:[{visibility:"simplified"},{color:"#ffffff"}]},{featureType:"road.highway",elementType:"labels.icon",stylers:[{color:"#ffffff"},{visibility:"off"}]},{featureType:"road.arterial",stylers:[{color:"#ffffff"}]},{featureType:"road.local",stylers:[{color:"#ffffff"}]},{featureType:"poi.park",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{color:"#71c8d4"}]},{featureType:"landscape",stylers:[{color:"#e5e8e7"}]},{featureType:"poi.park",stylers:[{color:"#8ba129"}]},{featureType:"road",stylers:[{color:"#ffffff"}]},{featureType:"poi.sports_complex",elementType:"geometry",stylers:[{color:"#c7c7c7"},{visibility:"off"}]},{featureType:"water",stylers:[{color:"#a0d3d3"}]},{featureType:"poi.park",stylers:[{color:"#91b65d"}]},{featureType:"poi.park",stylers:[{gamma:1.51}]},{featureType:"poi.park",elementType:"labels.text",stylers:[{gamma:1},{color:"#8ba129"},{weight:.4}]},{featureType:"road.local",elementType:"geometry",stylers:[{visibility:"on"}]},{featureType:"poi.government",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"landscape",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{visibility:"simplified"}]},{featureType:"road.local",stylers:[{visibility:"simplified"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#aaaaaa"}]}]},markerIcons=[{name:"restaurant",normal:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(24,33),new google.maps.Point(1,5664)),hover:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(24,33),new google.maps.Point(1,5697))},{name:"hotel",normal:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(30,36),new google.maps.Point(1,5810)),hover:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(30,36),new google.maps.Point(1,5846))},{name:"park",normal:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(29,40),new google.maps.Point(1,5882)),hover:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(29,40),new google.maps.Point(1,5922))},{name:"arch",normal:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(24,33),new google.maps.Point(1,4998)),hover:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(24,33),new google.maps.Point(1,5031))},{name:"art",normal:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(24,32),new google.maps.Point(1,7046)),hover:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(24,32),new google.maps.Point(1,7078))},{name:"attractions",normal:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(24,33),new google.maps.Point(1,5064)),hover:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(24,33),new google.maps.Point(1,5097))},{name:"cafe",normal:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(24,33),new google.maps.Point(1,5598)),hover:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(24,33),new google.maps.Point(1,5631))},{name:"bar",normal:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(24,33),new google.maps.Point(1,5130)),hover:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(24,33),new google.maps.Point(1,5163))},{name:"bike",normal:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(33,41),new google.maps.Point(1,5196)),hover:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(33,41),new google.maps.Point(1,5237))},{name:"museum",normal:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(23,34),new google.maps.Point(1,4850)),hover:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(23,34),new google.maps.Point(1,4884))},{name:"memorial",normal:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(23,34),new google.maps.Point(1,4850)),hover:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(23,34),new google.maps.Point(1,4884))},{name:"path",normal:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(31,40),new google.maps.Point(1,4918)),hover:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(31,40),new google.maps.Point(1,4958))},{name:"ferry",normal:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(31,40),new google.maps.Point(1,5730)),hover:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(31,40),new google.maps.Point(1,5770))},{name:"parking_garage",normal:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(30,40),new google.maps.Point(1,5962)),hover:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(30,40),new google.maps.Point(1,6002))},{name:"shopping",normal:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(30,35),new google.maps.Point(1,6042)),hover:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(30,35),new google.maps.Point(1,6077))},{name:"vehicle_service",normal:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(31,40),new google.maps.Point(1,6112)),hover:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(31,40),new google.maps.Point(1,6152))},{name:"yellowR",normal:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(59,39),new google.maps.Point(1,6285)),hover:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(59,39),new google.maps.Point(1,6325))},{name:"red1",normal:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(35,44),new google.maps.Point(1,6853)),hover:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(35,44),new google.maps.Point(1,6897))},{name:"red123",normal:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(59,40),new google.maps.Point(1,6365)),hover:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(59,40),new google.maps.Point(1,6405))},{name:"red23",normal:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(45,40),new google.maps.Point(1,6445)),hover:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(45,40),new google.maps.Point(1,6485))},{name:"green45",normal:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(45,40),new google.maps.Point(1,6525)),hover:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(45,40),new google.maps.Point(1,6565))},{name:"blueAC",normal:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(45,40),new google.maps.Point(1,6605)),hover:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(45,40),new google.maps.Point(1,6645))},{name:"blueE",normal:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(35,44),new google.maps.Point(1,6765)),hover:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(35,44),new google.maps.Point(1,6809))},{name:"goldJZ",normal:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(45,40),new google.maps.Point(1,6685),new google.maps.Point(22,0)),hover:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(45,40),new google.maps.Point(1,6725),new google.maps.Point(22,0)),orientation:"top"},{name:"m20",normal:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(31,40),new google.maps.Point(1,5278)),hover:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(31,40),new google.maps.Point(1,5318))},{name:"m22",normal:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(31,40),new google.maps.Point(1,5358)),hover:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(31,40),new google.maps.Point(1,5398))},{name:"m5",normal:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(31,40),new google.maps.Point(1,5438)),hover:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(31,40),new google.maps.Point(1,5478))},{name:"m9",normal:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(31,40),new google.maps.Point(1,5518)),hover:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(31,40),new google.maps.Point(1,5558))},{name:"m103",normal:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(31,40),new google.maps.Point(1,6966)),hover:new google.maps.MarkerImage("/Content/img/spritesheet.png",new google.maps.Size(31,40),new google.maps.Point(1,7006))}],typeof mapOverride!="undefined"&&(mapOverride.hasOwnProperty("latitude")&&mapOverride.hasOwnProperty("longitude")&&(mapOptions.center=new google.maps.LatLng(mapOverride.latitude,mapOverride.longitude)),mapOverride.hasOwnProperty("zoom")&&(mapOptions.zoom=mapOverride.zoom)),typeof mobileOverride!="undefined"&&mobileOverride.hasOwnProperty("override")&&(o=mobileOverride.hasOwnProperty("width")?mobileOverride.width:-1,o>0&&$(window).width()<=o&&(mobileOverride.hasOwnProperty("latitude")&&mobileOverride.hasOwnProperty("longitude")&&(mapOptions.center=new google.maps.LatLng(mobileOverride.latitude,mobileOverride.longitude)),mobileOverride.hasOwnProperty("zoom")&&(mapOptions.zoom=mobileOverride.zoom))),transitLayer=new google.maps.TransitLayer,c=document.getElementById("map"),map=new google.maps.Map(c,mapOptions),$("#search-results").length&&(s=$(window).width(),s<=1024&&s>=768&&google.maps.event.addListenerOnce(map,"projection_changed",function(){var n=map.getProjection().fromLatLngToPoint(mapOptions.center),t=new google.maps.Point(200/Math.pow(2,map.getZoom()),0);map.setCenter(map.getProjection().fromPointToLatLng(new google.maps.Point(n.x-t.x,n.y)))})),updateMapDebug(),google.maps.event.addListener(map,"bounds_changed",function(){updateMapDebug()}),f=new google.maps.LatLng(40.709315793728258,-74.017428120468139),e=new google.maps.LatLng(40.714748256710564,-74.005261620376587),typeof mapOverlay!="undefined"&&(mapOverlay.hasOwnProperty("neBoundsLat")&&mapOverlay.hasOwnProperty("neBoundsLat")&&(e=new google.maps.LatLng(parseFloat(mapOverlay.neBoundsLat),parseFloat(mapOverlay.neBoundsLng))),mapOverlay.hasOwnProperty("swBoundsLat")&&mapOverlay.hasOwnProperty("swBoundsLat")&&(f=new google.maps.LatLng(parseFloat(mapOverlay.swBoundsLat),parseFloat(mapOverlay.swBoundsLng)))),l=new google.maps.LatLngBounds(f,e),typeof mapOverlay!="undefined"&&mapOverlay.hasOwnProperty("showOverlay")&&mapOverlay.showOverlay==!0&&(a="/Content/img/map-overlay.png?v=2",overlay=new WTCOverlay(l,a,map)),typeof mapOverlay!="undefined"&&mapOverlay.hasOwnProperty("debugMapOverlay")&&mapOverlay.debugMapOverlay==!0&&(i=new google.maps.Marker({position:f,map:map,draggable:!0}),r=new google.maps.Marker({position:e,map:map,draggable:!0}),google.maps.event.addListener(i,"drag",function(){var n=i.getPosition(),t=r.getPosition(),u=new google.maps.LatLngBounds(n,t);overlay.updateBounds(u)}),google.maps.event.addListener(r,"drag",function(){var n=i.getPosition(),t=r.getPosition(),u=new google.maps.LatLngBounds(n,t);overlay.updateBounds(u)}),google.maps.event.addListener(i,"dragend",function(){var n=i.getPosition(),t=r.getPosition();console.log("point1"+n),console.log("point2"+t)}),google.maps.event.addListener(r,"dragend",function(){var n=i.getPosition(),t=r.getPosition();console.log("point1"+n),console.log("point2"+t)})),typeof searchRequest!="undefined"&&searchRequest.length>0&&(service=new google.maps.places.PlacesService(map),searchRequest[currentRequest].location=new google.maps.LatLng(searchRequest[currentRequest].latitude,searchRequest[currentRequest].longitude),$.getJSON("/Maps/SearchNearby?location="+searchRequest[currentRequest].location.toUrlValue()+"&radius="+searchRequest[currentRequest].radius+"&types="+searchRequest[currentRequest].types,function(n){var t,i;for($(".loading-results").fadeOut(300),t=0;t<n.length;t++)i=jQuery.parseJSON(n[t]),searchResults(i.results,i.status,!0)})),typeof mapOverride!="undefined"&&mapOverride.hasOwnProperty("showTransit")&&mapOverride.showTransit==!0&&transitLayer.setMap(map),locations[locations.length-1]==null&&locations.pop(),t=0;t<locations.length;t++)n=createMarker(new google.maps.LatLng(locations[t].lat,locations[t].long),new Array(locations[t].icon)),n.setMap(map),h=!1,($("html").hasClass("ie8")||$("html").hasClass("ie9"))&&(h=!0),n.infobox=new InfoBox({alignBottom:!0,content:document.getElementById("wtc-infobox-"+locations[t].id),disableAutoPan:h,maxWidth:parseInt($("#wtc-infobox-"+locations[t].id).css("max-width"),10),pixelOffset:new google.maps.Size(-52,-47),zIndex:null,boxStyle:{opacity:1,width:$("#wtc-infobox-"+locations[t].id).css("max-width")},closeBoxMargin:"12px 4px 2px 2px",closeBoxURL:"/Content/img/infobox_close.png",infoBoxClearance:new google.maps.Size(20,20)}),n.infobox.oldDraw=n.infobox.draw,n.infobox.oldClose=n.infobox.close,n.infobox.draw=function(){this.oldDraw.apply(this),jQuery(this.div_).hide(),jQuery(this.div_).fadeIn(300)},n.infobox.close=function(){var n=this;jQuery(this.div_).fadeOut(300,function(){n.oldClose.apply(n)})},n.shown=!0,n.markerid=locations[t].id,markersArray.push(n),google.maps.event.addListener(n.infobox,"closeclick",function(){for(var n=0;n<markersArray.length;n++)markersArray[n].shown==!1&&(markersArray[n].setMap(map),markersArray[n].shown=!0)});if(u=$("#map"),u.length){v();$(window).on("resize",v)}typeof initGettingHereMarkers=="function"&&initGettingHereMarkers()}function clearGettingHere(){for(var n=0;n<markersArray.length;n++)markersArray[n].shown==!1&&markersArray[n].infobox.close(),markersArray[n].setMap(null);activeMarker=null,markersArray=[]}function mapsGettingHereCreateMarkers(n){var r,i,t,u;if(n!=null){for(n[n.length-1]==null&&n.pop(),r=[],i=0;i<n.length;i++)t=createMarker(new google.maps.LatLng(n[i].lat,n[i].long),new Array(n[i].icon)),t.setMap(null),u=!1,($("html").hasClass("ie8")||$("html").hasClass("ie9"))&&(u=!0),t.infobox=new InfoBox({alignBottom:!0,content:document.getElementById("wtc-infobox-"+n[i].id),disableAutoPan:u,maxWidth:parseInt($("#wtc-infobox-"+n[i].id).css("max-width"),10),pixelOffset:new google.maps.Size(-52,-47),zIndex:null,boxStyle:{opacity:1,width:$("#wtc-infobox-"+n[i].id).css("max-width")},closeBoxMargin:"12px 4px 2px 2px",closeBoxURL:"/Content/img/infobox_close.png",infoBoxClearance:new google.maps.Size(20,20)}),t.infobox.oldDraw=t.infobox.draw,t.infobox.oldClose=t.infobox.close,t.infobox.draw=function(){this.oldDraw.apply(this),jQuery(this.div_).hide(),jQuery(this.div_).fadeIn(300)},t.infobox.close=function(){var n=this;jQuery(this.div_).fadeOut(300,function(){n.oldClose.apply(n)})},t.shown=!1,t.markerid=n[i].id,r.push(t),google.maps.event.addListener(t.infobox,"closeclick",function(){for(var n=0;n<markersArray.length;n++)markersArray[n].shown==!1&&(markersArray[n].setMap(map),markersArray[n].shown=!0)});return r}}function showGettingHere(n){if(n!=null)for(var t=0;t<n.length;t++)n[t].setMap(map),n[t].shown=!0,markersArray.push(n[t])}var resultBox,searchIB,search_ib_content,debug_map,currentRequest,activeMarker,markerIcons,markersArray,map,service,mapOptions,transitLayer,overlay,WTCOverlay;jQuery(document).ready(function(n){function u(n){n=n.split("+").join(" ");for(var i={},t,r=/[?&]?([^=]+)=([^&]*)/g;t=r.exec(n);)i[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);return i}var t,i,r;n("#carouselhero").carousel({interval:5e3}),t=n(".explore-slider"),t.on("jcarousel:reload jcarousel:create",function(){var n=t.innerWidth();n>1e3?n=n/5:n>750?n=n/4:n>=650?n=n/3:n>=450&&(n=n/2),t.jcarousel("items").css("width",n+"px")}).jcarousel({wrap:null}),n(".explore-control-prev").on("jcarouselcontrol:active",function(){n(this).removeClass("disabled")}).on("jcarouselcontrol:inactive",function(){n(this).addClass("disabled")}).jcarouselControl({target:"-=1"}),n(".explore-control-next").on("jcarouselcontrol:active",function(){n(this).removeClass("disabled")}).on("jcarouselcontrol:inactive",function(){n(this).addClass("disabled")}).jcarouselControl({target:"+=1"}),i=n(".gallery-slider"),i.on("jcarousel:reload jcarousel:create",function(){var n=i.innerWidth();n>1e3?n=n/5:n>750?n=n/4:n>=350&&(n=n/3),i.jcarousel("items").css("width",n+"px")}).jcarousel({wrap:null}),n(".gallery-control-prev").on("jcarouselcontrol:active",function(){n(this).removeClass("disabled")}).on("jcarouselcontrol:inactive",function(){n(this).addClass("disabled")}).jcarouselControl({target:"-=1"}),n(".gallery-control-next").on("jcarouselcontrol:active",function(){n(this).removeClass("disabled")}).on("jcarouselcontrol:inactive",function(){n(this).addClass("disabled")}).jcarouselControl({target:"+=1"}),n("a.carousel-video").click(function(){(c=n(this).attr("data-lightbox-carousel"),n(c).length!=0)&&(n(c).carousel("pause"),n(c).parent().find(".carousel-nav").addClass("hidden"))}),r=u(document.location.search),r.video!=undefined&&r.video.length&&n("a[data-opentarget='"+r.video+"']").click()}),$(window).load(function(){function f(){if(n.length!=0){var r=$(window).scrollTop();r>=$(i).offset().top-n.height()?($(n).css("visibility","hidden"),$(t).css("visibility","visible")):($(n).css("visibility","visible"),$(t).css("visibility","hidden"))}}var e=[],n,t,i,u,r;$("div.slideImage").each(function(){var t=$(this).css("background-image"),n=new Image;n.src=t.replace(/^url\(['"]?/,"").replace(/['"]?\)$/,""),e.push(n)}),$(window).scroll(function(){$(this).scrollTop()!=0?$("#back2top").fadeIn():$("#back2top").fadeOut()}),$("#back2top").click(function(){$("body,html").animate({scrollTop:0},500),location.hash!=""&&(location.hash="")}),i=$("#sticky-links"),i.each(function(){(n=$(".header-links",this),n.length!=0)&&(t=n.before(n.clone()),$(t).addClass("sticky-nav").css("padding-left",$(this).offset().left+"px"),f(),$(window).scroll(f),$(window).resize(function(){$(t).css("padding-left",$(i).offset().left+"px")}),$(".header-links a").click(function(){var t=$("div"+$(this).attr("href"));return $("html,body").animate({scrollTop:t.offset().top-n.height()},"slow"),!1}),$("body").scrollspy({target:"#sticky-links",offset:62}))});$("#to-the-top").on("click",function(){return $("html,body").animate({scrollTop:0},"fast"),!1});if($("html").hasClass("ie8")||$("html").hasClass("ie9")){u=2,r=3,$("#columnize ul").hasClass("three")&&r--,$(window).width()>991&&(u++,r++),$("#columnize").columnize({columns:r,cssClassPrefix:"mapColumn",lastNeverTallest:!0}),$("#events-columnize").columnize({columns:u,cssClassPrefix:"eventsColumn",lastNeverTallest:!0});$("body").on("focus","[placeholder]",function(){var i=$(this),n,t;i.attr("type")=="password"&&i.attr("data-password","true"),i.val()==i.attr("placeholder")&&(i.val(""),i.removeClass("placeholder"),i.attr("data-password")=="true"&&(n=i[0],t=document.createElement("input"),t.type="password",n.size&&(t.size=n.size),n.value&&(t.value=n.value),n.name&&(t.name=n.name),n.id&&(t.id=n.id),n.className&&(t.className=n.className),t.setAttribute("data-password","true"),t.setAttribute("placeholder",i.attr("placeholder")),n.parentNode.replaceChild(t,n),t.focus()))}).on("blur","[placeholder]",function(){var t=$(this),n,i;t.attr("type")=="password"&&t.attr("data-password","true"),(t.val()==""||t.val()==t.attr("placeholder"))&&(t.addClass("placeholder"),t.val(t.attr("placeholder")),t.attr("data-password")=="true"&&(n=t[0],i=document.createElement("input"),i.type="text",n.size&&(i.size=n.size),n.value&&(i.value=n.value),n.name&&(i.name=n.name),n.id&&(i.id=n.id),n.className&&(i.className=n.className),i.setAttribute("data-password","true"),i.setAttribute("placeholder",t.attr("placeholder")),n.parentNode.replaceChild(i,n)))});$("[placeholder]").blur(),$("form").submit(function(){$(this).find("[placeholder]").each(function(){var n=$(this);n.val()==n.attr("placeholder")&&n.val("")})})}}),$(window).load(function(){function i(){var i=parseInt($(t).attr("data-orig-pos"),10),u=$(t).outerHeight(),f=$(window),e=$(n).offset().top,o=$(n)[0].scrollHeight,r=f.scrollTop()+f.height();r>i&&r<=i+u?$(t).addClass("fixed").css("position","absolute").css("top",i+"px").css("bottom","initial"):r>i+u&&r<e+o+u?$(t).addClass("fixed").css("position","").css("top","").css("bottom",""):$(t).removeClass("fixed").css("position","").css("top","").css("bottom","")}$("img.gal-img.preload").lazyload({effect:"fadeIn"});var t=$("div.img-gal-container div.show-more"),n=$("div.img-container",$(t).parent());$(t).on("click",function(){var u,i;if($(this).hasClass("less")==!1){$(this).toggleClass("less"),$(this).attr("data-orig-pos",$(this).offset().top),i=$(n).outerHeight(),$(n).attr("data-orig-height",i).css("height",i+"px").css("overflow","hidden"),$(n).find("li.img-grid-item").css("display","inline-block");var r=$(n)[0].scrollHeight,f=$(n).offset().top,e=$(window).scrollTop()+$(window).height()-4;f+r>e&&(r=e-f-$(t).outerHeight()),$(n).animate({height:r+"px"},750,function(){$(window).scroll(),$(n).css("height","").css("overflow","")})}else u=$(t).offset().top-$(n).offset().top,i=parseInt($(n).attr("data-orig-height"),10),u<$(n).height()&&$(n).css("overflow","hidden").css("height",u+"px"),$(this).toggleClass("less").removeClass("fixed"),$(n).css("overflow","hidden").animate({height:i+"px"},750,function(){$(n).find("li.img-grid-item").css("display",""),$(n).css("height","").css("overflow","")})});$(window).scroll(function(){$(t).hasClass("less")!=!1&&i()})}),vehicleMarkers=[],subwayMarkers=[],pathMarkers=[],busMarkers=[],ferryMarkers=[],parkingMarkers=[],$(window).load(function(){function h(t,r,u){var o=$(r).offset(),f=t.pageX-o.left,e;(u&&(f=parseInt(t.originalEvent.touches[0].pageX,10)),f>$(r).width()-i.width()/2-20)||f<i.width()/2+20||(n.width(f),$(r).css("cursor","ew-resize"),e=f-i.width()/2-s/2,i.css("left",e+"px"))}function w(n){$(".building-bar[data-jcarousel=true], .building-tenants-bar[data-jcarousel=true]",n).each(function(){$(this).jcarousel("destroy");var n=$(this).parent();n.find(".building-control-next, .building-control-prev, .tenants-control-next, .tenants-control-prev").each(function(){try{$(this).jcarouselcontrol("destroy")}catch(n){}})})}function y(n){for(var t=$(n).parent();t.length;){if(t.hasClass("building-item"))break;t=t.parent()}return t}function d(){$(".building-item").each(function(){var n=$(this);$(".long-format",n).is(":visible")!=!1&&(w(this),n.find(".long-format").css("opacity","0"),n.find(".short-summary").css("opacity","0").css("position","relative").show(),n.find(".short-summary").animate({opacity:"1"},300),n.find(".long-format").hide())})}function p(n){var t,i;n.length!=0&&(t=n.find(".building-bar"),t.on("jcarousel:reload jcarousel:create",function(){var n=t.innerWidth();n>1e3?n=n/9:n>750?n=n/7:n>=630?n=n/6:n>=575?n=n/5:n>=460?n=n/4:n>=345?n=n/3:n>=230&&(n=n/2),t.jcarousel("items").css("width",n+"px")}).jcarousel({wrap:null}),n.find(".building-control-prev").on("jcarouselcontrol:active",function(){$(this).removeClass("disabled")}).on("jcarouselcontrol:inactive",function(){$(this).addClass("disabled")}).jcarouselControl({target:"-=1"}),n.find(".building-control-next").on("jcarouselcontrol:active",function(){$(this).removeClass("disabled")}).on("jcarouselcontrol:inactive",function(){$(this).addClass("disabled")}).jcarouselControl({target:"+=1"}),i=n.find(".building-tenants-bar"),i.on("jcarousel:reload jcarousel:create",function(){}).jcarousel({wrap:null}),n.find(".tenants-control-prev").on("jcarouselcontrol:active",function(){$(this).removeClass("disabled")}).on("jcarouselcontrol:inactive",function(){$(this).addClass("disabled")}).jcarouselControl({target:"-=1"}),n.find(".tenants-control-next").on("jcarouselcontrol:active",function(){$(this).removeClass("disabled")}).on("jcarouselcontrol:inactive",function(){$(this).addClass("disabled")}).jcarouselControl({target:"+=1"}))}function b(n,t){var i=$(".tl-item-detail",t);$(n).toggleClass("open"),$(n).hasClass("open")?($(i).css("height","0"),$(i).show(),$(i).animate({height:$(i)[0].scrollHeight+"px"},200,"linear",function(){$(n).css("height","")})):$(i).animate({height:"0"},200,"linear",function(){$(i).hide()}),$("span",n).hasClass("history-plus")?$("span",n).removeClass("history-plus").addClass("history-minus"):$("span",n).removeClass("history-minus").addClass("history-plus")}function a(){$("div.tl-item-row, div.tl-year",v).last().is(":visible")?$(".tl-bottom .tl-nav",f).addClass("disabled"):$(".tl-bottom .tl-nav",f).removeClass("disabled"),$("div.tl-item-row, div.tl-year",v).eq(0).is(":visible")?$(".tl-top .tl-nav",f).addClass("disabled"):$(".tl-top .tl-nav",f).removeClass("disabled")}function g(){var n=$("#sticky-years li.active").index(),t=$("#sticky-years").jcarousel("fullyvisible"),i=$(t[0]).index(),u=$(t[$(t).length-1]).index();(n<i||n>u)&&(n=n>2?n-2:0,r.jcarousel("scroll",n))}function k(){if(u.length!=0){var n=$(window).scrollTop();n>=$("div.history-content").offset().top-$(u).height()?$(u).addClass("sticky-nav"):$(u).removeClass("sticky-nav")}}var e=!1,o=$(".about-slider"),n=$(".left-side",o),i=$(".slider",o),s,l,r,c,f,v,t,u;$("a[data-slide]").click(function(){var t,i,r;$("a[data-slide]").find("span").removeClass("active"),$(this).find("span").addClass("active"),t=n.width(),n.parent().fadeOut(300),i=$(this).attr("data-slide"),n=$("div#"+i+" .left-side"),n.width(t),n.parent().fadeIn(300),r=$(this).attr("data-summary"),$("div.ba-item-text.ba-mobile-summary").removeClass("visible-xs"),$("div#"+r).addClass("visible-xs")}),s=parseInt(n.css("border-right-width"))||2,o.mousedown(function(n){e=!0,h(n,this,!1)}).mousemove(function(n){e&&h(n,this,!1)}).mouseup(function(){e=!1,$(this).css("cursor","initial")}).mouseleave(function(){e=!1,$(this).css("cursor","initial")}).bind("touchstart",function(n){slide_click=!0,h(n,this,!0)}).bind("touchmove",function(n){slide_click&&h(n,this,!0)}).bind("touchend",function(){slide_click=!1,$(this).css("cursor","initial")}),n.width($("body").width()*.7),i.css("left",n.width()-i.width()/2-s/2+"px").show(),l=$("div.image-slider",o),l.width($("body").width());$(window).on("resize",function(){l.width($("body").width()),n.width($("body").width()*.7),i.css("left",n.width()-i.width()/2-s/2+"px")});$("a.getting-here-title").click(function(){var i=$(this).hasClass("active"),t,n;$("a.getting-here-title").each(function(){$(this).removeClass("active")}),$(this).addClass("active"),i||(t=$(this).attr("data-map-effects"),showTransit(t=="transit"),showFerry(t=="ferry"),clearGettingHere(),n=null,$(this).hasClass("vehicle")&&(n=vehicleMarkers),$(this).hasClass("subway")&&(n=subwayMarkers),$(this).hasClass("path")&&(n=pathMarkers),$(this).hasClass("bus")&&(n=busMarkers),$(this).hasClass("ferry")&&(n=ferryMarkers),$(this).hasClass("parking")&&(n=parkingMarkers),showGettingHere(n)),$("html, body").animate({scrollTop:$(".google-map-container.getting-here").offset().top-15},500)}),r=$(".year-bar"),r.on("jcarousel:reload jcarousel:create",function(){var n=r.innerWidth(),t;n>1e3?n=n/10:n>850?n=n/8:n>=630?n=n/6:n>=200&&(n/=4),t=$("li.active",r).index(),r.jcarousel("items").css("width",n+"px"),r.jcarousel("scroll",t)}).jcarousel({wrap:null}),$(".year-control-prev").on("jcarouselcontrol:active",function(){$(this).removeClass("disabled")}).on("jcarouselcontrol:inactive",function(){$(this).addClass("disabled")}).jcarouselControl({target:"-=3"}),$(".year-control-next").on("jcarouselcontrol:active",function(){$(this).removeClass("disabled")}).on("jcarouselcontrol:inactive",function(){$(this).addClass("disabled")}).jcarouselControl({target:"+=3"}),c=$(".companies-bar"),c.on("jcarousel:reload jcarousel:create",function(){var n=c.innerWidth();n>1e3?n=n/9:n>750?n=n/7:n>=630?n=n/6:n>=575?n=n/5:n>=460?n=n/4:n>=345?n=n/3:n>=230&&(n=n/2),c.jcarousel("items").css("width",n+"px")}).jcarousel({wrap:null}),$(".company-control-prev").on("jcarouselcontrol:active",function(){$(this).removeClass("disabled")}).on("jcarouselcontrol:inactive",function(){$(this).addClass("disabled")}).jcarouselControl({target:"-=1"}),$(".company-control-next").on("jcarouselcontrol:active",function(){$(this).removeClass("disabled")}).on("jcarouselcontrol:inactive",function(){$(this).addClass("disabled")}).jcarouselControl({target:"+=1"}),$(".close-nav-holder").click(function(){var n=y(this);n.length!=0&&(w(n),$("html, body").animate({scrollTop:n.offset().top},500),n.find(".long-format").animate({height:"313px",opacity:"0"},500,function(){n.find(".short-summary").css("opacity","0").css("position","relative").show(),n.find(".short-summary").animate({opacity:"1"},300),n.find(".long-format").hide()}))}),$(".fade-in-close").removeClass("fade-in-close"),$(".building-more-loading").css("display","none"),$(".building-more.hidden").removeClass("hidden"),$(".more-nav-holder.loading").removeClass("loading"),p($(".long-format:visible")),$(".more-nav-holder").click(function(){var n=y(this);n.length!=0&&(d(),n.find(".short-summary").css("position","absolute").fadeOut(500),n.find(".long-format").show().animate({height:$(".long-format",n)[0].scrollHeight+"px",opacity:"1"},500,function(){$(this).css("height","")}),$("html, body").animate({scrollTop:n.offset().top},500),p(n))}),$(".tl-item-expand").click(function(){b(this,$(this).parent())}),$(".historyEventTitle").click(function(){var n=$(this).parent();b($(".tl-item-expand",n),n)}),f=$(".tl-container"),v=$("#tl-content",f),a(),t=$("#tl-content"),$(".tl-nav").click(function(){var u,r,f,e,i,n;if(!$(this).hasClass("disabled")){if(u=2,r=0,$(this).hasClass("next")){for(f=$("div.tl-item-row:visible, div.tl-year:visible",t).eq(0).index(),e=$("div.tl-item-row, div.tl-year",t),i=f-1;i>=0;i--)if(n=e.eq(i),n.css("height","0"),n.removeClass("hidden"),n.animate({height:$(n)[0].scrollHeight+"px"},200,"swing",function(){$(this).css("height","")}),n.hasClass("tl-item-row")&&r++,r>u)break}else{var o=$("div.tl-item-row:visible, div.tl-year:visible",t).length,s=$("div.tl-item-row, div.tl-year",t).length,f=$("div.tl-item-row:visible, div.tl-year:visible",t).eq(o-1).index(),e=$("div.tl-item-row, div.tl-year",t);for(i=f+1;i<s;i++)if(n=e.eq(i),n.css("height","0"),n.removeClass("hidden"),n.animate({height:$(n)[0].scrollHeight+"px"},200,"swing",function(){$(this).css("height","")}),n.hasClass("tl-item-row")&&r++,r>u)break}a()}}),u=$("div.timeline-year-bar"),k(),$(window).scroll(k),$("#sticky-years a").click(function(){function v(n){$("html,body").animate({scrollTop:n.offset().top-s-3},"slow",function(){$("body").scrollspy("refresh")})}var y=$(this),r=$("div"+$(this).attr("href")),s=$(u).height(),h,o,c,i,n;if($(u).hasClass("sticky-nav")||(s*=2),h=!1,r.is(":visible")==!1){delay=!0;var f=$("div.tl-item-row:visible, div.tl-year:visible",t).eq(0).index(),l=r.index(),e=$("div.tl-item-row, div.tl-year",t);if(l<f){for(i=f-1;i>=0;i--)if(n=e.eq(i),n.hasClass("tl-item-row")&&n.css("height","0"),n.removeClass("hidden"),n.hasClass("tl-item-row")&&n.animate({height:$(n)[0].scrollHeight+"px"},200,"swing",function(){$(this).css("height","")}),n.is(r))break}else for(o=!1,c=0,i=f+1;i<e.length;i++)if(n=e.eq(i),n.css("opacity","0"),n.removeClass("hidden"),n.animate({opacity:1},500,"swing"),n.is(r))o=!0;else if(o&&c++>4)break;a()}return h||v(r),!1}),$("body").scrollspy({target:"#sticky-years",offset:53});$("#sticky-years").on("activate.bs.scrollspy",function(){g()});$("form#contact").submit(function(){$("input, textarea",this).removeClass("invalid"),$("span.contact-error",this).hide();var t=$("#contactEmail",this).val(),i=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;return(t!=""&&i.test(t)||($("#contactEmail",this).addClass("invalid"),$("#contactError").show()),$("#contactName",this).val()==""&&($("#contactName",this).addClass("invalid"),$("#contactError").show()),$("#contactMessage",this).val()==""&&($("#contactMessage",this).addClass("invalid"),$("#contactError").show()),$("#contactError").is(":visible")==!0)?(($("html").hasClass("ie8")||$("html").hasClass("ie9"))&&$(this).find("[placeholder]").each(function(){var n=$(this);n.val()==""&&n.val(n.attr("placeholder"))}),!1):($("#contactEmailSuccess").val("true"),!0)}),$("span.building-name").click(function(){var n=$(this),t;$("span.building-name").removeClass("active"),$(this).addClass("active"),$(".building-learn-more").fadeOut(300),$(".building-loading",n.parent()).fadeIn(100),t=new Image,t.onload=function(){$(".building-loading",n.parent()).hide(),$(".building-learn-more",n.parent()).fadeIn(300),$(".about-overview-top.animate").fadeOut(250,function(){$(this).css("background-image","url("+n.attr("data-attr-bg")+")"),$(this).css("filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+n.attr("data-attr-bg")+"',sizingMethod='scale')"),$(this).fadeIn(500)})},t.src=n.attr("data-attr-bg")})}),searchIB=null,search_ib_content=null,$(window).load(function(){$("li.map-item, div.callout-item").on("click",function(){for(var t,n=0;n<markersArray.length;n++)if(markersArray[n].markerid==$(this).attr("data-icon-target")){if(markersArray[n].shown==!1)return;for($("html,body").animate({scrollTop:0},"slow"),t=0;t<markersArray.length;t++)markersArray[t].shown==!1&&(markersArray[t].infobox.close(),markersArray[t].setMap(map),markersArray[t].shown=!0);markersArray[n].infobox.open(map,markersArray[n]),$("html").hasClass("ie8")||$("html").hasClass("ie9")?panWithOffset(markersArray[n].position):map.panTo(markersArray[n].position),markersArray[n].setMap(null),markersArray[n].shown=!1,activeMarker=markersArray[n];break}});if(typeof mapOverride!="undefined"&&mapOverride.hasOwnProperty("debug")){debug_map=!0;var t="<div class='map-debug'>MAP DEBUG:</div>",n=$("#map");$("#map").parent().hasClass("map-container")&&(n=$("#map").parent()),n.after(t)}resultBox=$("#search-results"),search_ib_content=$("#wtc-infobox-search")}),debug_map=!1,currentRequest=0,activeMarker=null,markerIcons=[],markersArray=[],typeof google=="object"&&typeof google.maps=="object"&&google.maps.event.addDomListener(window,"load",init),typeof google=="object"&&typeof google.maps=="object"&&(WTCOverlay.prototype=new google.maps.OverlayView),WTCOverlay.prototype.onAdd=function(){var t=document.createElement("div"),n,i;t.style.borderStyle="none",t.style.borderWidth="0px",t.style.position="absolute",n=document.createElement("img"),n.src=this.image_,n.alt="Map Overlay",n.style.width="100%",n.style.height="100%",n.style.position="absolute",t.appendChild(n),this.div_=t,i=this.getPanes(),i.overlayLayer.appendChild(t),i.overlayLayer.style.zIndex="-1"},WTCOverlay.prototype.draw=function(){var r=this.getProjection(),t=r.fromLatLngToDivPixel(this.bounds_.getSouthWest()),i=r.fromLatLngToDivPixel(this.bounds_.getNorthEast()),n=this.div_;n.style.left=t.x+"px",n.style.top=i.y+"px",n.style.width=i.x-t.x+"px",n.style.height=t.y-i.y+"px"},WTCOverlay.prototype.onRemove=function(){this.div_.parentNode.removeChild(this.div_),this.div_=null},WTCOverlay.prototype.updateBounds=function(n){this.bounds_=n,this.draw()},$("#search-results input.search").keypress(function(n){var t=n.which;if(t==13)return $("#mapSearch").click(),!1}),$("#mapSearch").click(function(){activeMarker!=null&&(activeMarker.infobox.close(),activeMarker=null);for(var n=0;n<markersArray.length;n++)markersArray[n].setMap(null);markersArray=[],$(".search-results").html(""),$(".no-results").hide(),$(".loading-results").fadeIn(500),$.getJSON("/Maps/SearchNearby?location="+searchRequest[0].location.toUrlValue()+"&radius="+searchRequest[0].radius+"&keyword="+encodeURIComponent($("input.search").val())+"&types="+searchRequest[0].types,function(n){var t,i;for($(".loading-results").hide(),t=0;t<n.length;t++)i=jQuery.parseJSON(n[t]),searchResults(i.results,i.status,!0)})}),$(window).load(function(){$("#mobile-menu-toggle").click(function(){$("body").hasClass("mobile-open")==!1?($("body").addClass("mobile-open"),$("div.main-container").animate({left:"81%"},"easeOutBounce"),$("div.mobile-menu-items").css("display","inline").animate({left:0},"easeOutBounce")):($("body").removeClass("mobile-open"),$("div.main-container").animate({left:0},"easeOutBounce"),$("div.mobile-menu-items").animate({left:-35},"easeOutBounce",function(){$(this).hide()}))})}),$(window).load(function(){function r(n){n=n.split("+").join(" ");for(var i={},t,r=/[?&]?([^=]+)=([^&]*)/g;t=r.exec(n);)i[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);return i}var t=r(document.location.search),n,i;t.media!=undefined&&t.media.length&&(n=t.media,i=[3037,3006,3015,2246,115,117,118,296,297,298,1628,1629,1631,1642,1632,3e3,2999,3001,3002,3003,3004,3036],n<i.length&&(n=i[n]),$("a[data-mediaid='"+n+"']").click());$("div.news-social a.popout").on("click",function(){var i=$(this).attr("data-title"),t=$(this).attr("data-image"),n=[location.protocol,"//",location.host,location.pathname].join("");return t=[location.protocol,"//",location.host,t].join(""),n=n.replace(/localhost:\d*/g,"wtc.core12.net"),t=t.replace(/localhost:\d*/g,"wtc.core12.net"),$(this).attr("id")=="fb-share"?$(this).attr("href","http://www.facebook.com/sharer.php?u="+escape(n)+"&t="+encodeURIComponent(i)):$(this).attr("id")=="twitter-share"?$(this).attr("href","http://twitter.com/share?url="+escape(n)+"&text="+encodeURIComponent(i)):$(this).attr("id")=="pinterest-share"?$(this).attr("href","http://pinterest.com/pin/create/button/?url="+escape(n)+"&media="+escape(t)+"&description="+encodeURIComponent(i)):$(this).attr("id")=="gplus-share"&&$(this).attr("href","https://plus.google.com/share?url="+escape(n)+"&hl="+encodeURIComponent(i)),window.open($(this).attr("href"),"sharewindow","status=0,toolbar=0,location=0,menubar=0,width=500,height=550"),!1});$("div.press-more").on("click",function(){var n=$(this).parents(".container.press-kit");$(".press-kit-items.addl-row",n).toggle(),$("span",this).toggleClass("more-bar").toggleClass("close-bar")})}),jQuery(document).ready(function(n){function t(){n(".memorial-item-shell .row").each(function(){n(this).find(".multi-item .item").css("height","auto");var t=n(this).find(".multi-item .item").map(function(){return n(this).height()}).get(),i=Math.max.apply(null,t)+20;n(this).find(".multi-item .item").height(i)})}t();n(window).on("resize",function(){t()});n(".memorial-item-shell img").load(function(){t()})}),$(window).load(function(){function t(){$(".building-tenants-bar[data-jcarousel=true]").each(function(){$(this).jcarousel("destroy");var n=$(this).parent();n.find(".tenants-control-next, .tenants-control-prev").each(function(){try{$(this).jcarouselcontrol("destroy")}catch(n){}})})}function n(){var n=$(".retail-details:visible"),t;n.length==0&&(n=$(".shop-slider")),t=n.find(".building-tenants-bar"),t.on("jcarousel:reload jcarousel:create",function(){}).jcarousel({wrap:null}),n.find(".tenants-control-prev").on("jcarouselcontrol:active",function(){$(this).removeClass("disabled")}).on("jcarouselcontrol:inactive",function(){$(this).addClass("disabled")}).jcarouselControl({target:"-=1"}),n.find(".tenants-control-next").on("jcarouselcontrol:active",function(){$(this).removeClass("disabled")}).on("jcarouselcontrol:inactive",function(){$(this).addClass("disabled")}).jcarouselControl({target:"+=1"})}$("a[data-retail-target]").click(function(){var i=$(".retail-images img");return i.length==0?!1:($("a[data-retail-target] h3").removeClass("hl-blue").addClass("dark-grey"),$("h3",this).addClass("hl-blue").removeClass("dark-grey"),i.attr("src",$(this).attr("data-retail-image")),t(),$(".retail-details").hide(),$(".retail-details[id="+$(this).attr("data-retail-target")+"]").fadeIn(300),n(),!1)}),n()})